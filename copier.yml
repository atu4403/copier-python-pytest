# copier-python-pytest ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè¨­å®š

_min_copier_version: "9.4.0"
_subdirectory: template

_message_after_copy: |
  ğŸ‰ pytestç’°å¢ƒä»˜ãPythonãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒä½œæˆã•ã‚Œã¾ã—ãŸï¼
  
  âœ… è¨­å®šæ¸ˆã¿æ©Ÿèƒ½:
     â€¢ pytest + conftest.py + pytest.ini
  {% if cli_support %}
     â€¢ Click CLI ã‚µãƒãƒ¼ãƒˆ
  {% endif %}
  
  {% if cli_support -%}
  ğŸ”§ CLIè¨­å®šã®è¿½åŠ æ‰‹é †:
     pyproject.tomlã«ä»¥ä¸‹ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ï¼š
     
     [project.scripts]
     {{ cli_command_name }} = "{{ project_slug }}.cli:main"
  
  {%- endif %}
  
  ğŸ“ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:
     cd {{ project_slug }}
     # ä»®æƒ³ç’°å¢ƒã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ãƒˆï¼ˆãŠä½¿ã„ã®ã‚·ã‚§ãƒ«ã«åˆã‚ã›ã¦é¸æŠï¼‰
     source .venv/bin/activate        # bash/zsh
     source .venv/bin/activate.fish   # fish
     .venv\Scripts\activate           # Windows CMD
     .venv\Scripts\Activate.ps1       # PowerShell
     
     # ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
     pytest
  {% if cli_support %}
     {{ project_slug }} --help  # CLIãƒ˜ãƒ«ãƒ—ã‚’ç¢ºèª
  {% endif %}

# === ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåŸºæœ¬æƒ…å ± ===
project_slug:
  type: str
  default: "{{ _copier_conf.dst_path | basename }}"
  when: false

project_name:
  type: str
  help: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåï¼ˆè¡¨ç¤ºç”¨ï¼‰"
  default: "{{ project_slug | replace('_', ' ') | title }}"
  when: false

project_description:
  type: str
  help: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®èª¬æ˜ï¼ˆ1è¡Œã§ç°¡æ½”ã«ï¼‰"
  default: "Pythonãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ"

# === ä½œè€…æƒ…å ± ===
author_name:
  type: str
  help: "ä½œè€…å"
  default: "Your Name"

author_email:
  type: str
  help: "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹"
  default: "your.email@example.com"

github_username:
  type: str
  help: "GitHubãƒ¦ãƒ¼ã‚¶ãƒ¼åï¼ˆãƒªãƒã‚¸ãƒˆãƒªä½œæˆæ™‚ã«ä½¿ç”¨ï¼‰"
  default: "your-username"

# === ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š ===
cli_support:
  type: bool
  help: "ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¾ã™ã‹ï¼Ÿ"
  default: false

cli_command_name:
  type: str
  help: "CLIã‚³ãƒãƒ³ãƒ‰åï¼ˆä¾‹: myapp, mytoolï¼‰"
  default: "{{ project_slug.replace('_', '-') }}"
  when: "{{ cli_support }}"

# === è‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹å€¤ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¯è¡¨ç¤ºã—ãªã„ï¼‰ ===
copyright_year:
  type: int
  default: "{{ '%Y' | strftime }}"
  when: false

current_date:
  type: str
  default: "{{ '%Y-%m-%d' | strftime }}"
  when: false

# === ã‚¿ã‚¹ã‚¯ï¼ˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé©ç”¨å¾Œã®å‡¦ç†ï¼‰ ===
_tasks:
  # é–‹ç™ºä¾å­˜é–¢ä¿‚ã‚’è¿½åŠ 
  - "uv add --dev pytest pytest-mock"
  
  # CLIæ©Ÿèƒ½ãŒæœ‰åŠ¹ãªå ´åˆã¯Clickã‚’è¿½åŠ 
  - "{% if cli_support %}uv add click{% endif %}"
    
  # ä¾å­˜é–¢ä¿‚ã‚’åŒæœŸ
  - "uv sync"

# === ãƒ•ã‚¡ã‚¤ãƒ«é™¤å¤–è¨­å®š ===
_skip_if_exists:
  - ".git/"
  - ".copier-answers.yml"


# === ä¿¡é ¼ã§ãã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè¨­å®š ===
_templates_suffix: ".jinja"

# === ã‚³ãƒ”ãƒ¼å¾Œã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ— ===
_exclude:
  - "*.pyc"
  - "__pycache__/"
  - ".DS_Store"
  - "Thumbs.db"
